<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Store</title>
    <script>
      // Garantir que a navegação seja tratada pelo React Router
      (function() {
        // Lista de páginas que foram migradas para React
        const reactRoutes = ['/produtos', '/produtos/', '/cadastro', '/home', '/home/', '/carrinho', '/carrinho/'];
        const path = window.location.pathname;
        
        // Checar se está tentando acessar uma página HTML diretamente
        if (path.endsWith('.html')) {
          // Redirecionar para a rota equivalente no React Router
          const newPath = path.replace('.html', '');
          window.location.replace(newPath);
        }
        
        // Salvar o estado da navegação para o histórico
        window.addEventListener('load', function() {
          // Se estamos em uma rota do React, garantir que seja tratada pelo React Router
          if (reactRoutes.some(route => path.startsWith(route))) {
            // Forçar o uso do React Router em vez de navegação regular
            const link = document.createElement('a');
            link.href = path;
            link.style.display = 'none';
            document.body.appendChild(link);
            
            // Registramos o estado atual no histórico
            history.replaceState(null, document.title, path);
          }
        });
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
